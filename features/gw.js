let globalMixerData={ent_goo_pot:{finishTimer:0,points:0},ent_guano_mixer:{finishTimer:0,points:0},ent_spore_chamber:{finishTimer:0,points:0}},T4Items={itm_mushroomSeeds_04:{storages:0,inventory:0,total:0},itm_soilDryer_04:{storages:0,inventory:0,total:0},itm_cave_fertilizer_04:{storages:0,inventory:0,total:0}};function handleMixers(){if(null!==cachedMixers&&"cavehub"==currentLocation)for(let e in cachedMixers)if(cachedMixers.hasOwnProperty(e)){const t=cachedMixers[e];if(globalMixerData[e].finishTimer!==t.finishTimer&&(globalMixerData[e].finishTimer=t.finishTimer,localStorage.setItem(`${e}-finishTimer`,t.finishTimer)),globalMixerData[e].points!==t.points&&updateMixerPoints(e,t.points),entityOnScreen(t)){const{screenX:i,screenY:a}=calculateScreenCoords(t),o=`mixer-${e}`,n=queueToDraw.findIndex((e=>e.id===o)),r={id:o,x:i,y:a,text:`Points: ${t.points%1==0?t.points:t.points.toFixed(2)}`};n>=0?queueToDraw[n]=r:queueToDraw.push(r)}else{const t=`mixer-${e}`;queueToDraw=queueToDraw.filter((e=>e.id!==t))}}}function startUpdatingMixers(){["ent_goo_pot","ent_guano_mixer","ent_spore_chamber"].forEach((e=>{globalMixerData[e].finishTimer=parseInt(localStorage.getItem(`${e}-finishTimer`))||0,globalMixerData[e].points=parseFloat(localStorage.getItem(`${e}-points`))||0})),requestAnimationFrame((function e(){"cavehub"==currentLocation&&handleMixers(),requestAnimationFrame(e)}))}function updateMixerPoints(e,t){if(globalMixerData[e]){globalMixerData[e].points=t;const i=globalMixerData[e].pointsDiv;i&&(i.innerHTML=`Points: <span>${t%1==0?t:t.toFixed(2)}</span>`),localStorage.setItem(`${e}-points`,t)}}function lbReceiver(){window.addEventListener("message",(e=>{"VOXELS_GW_LB_WEEKLY"===e.data.type&&sendGWLeaderboard(e.data.data)}))}async function sendGWLeaderboard(e){chrome.storage.local.get("pid",(async function(t){const i={pid:t.pid,operation:"update_lb",extra:[{data:e}]};try{await makeRequestToTools(i)}catch(e){}}))}function handleT4Data(e,t){e&&(Object.keys(T4Items).forEach((e=>{T4Items[e][t]=0})),"inventory"===t?e.forEach((e=>{T4Items[e.item]&&(T4Items[e.item].inventory+=e.quantity)})):"storages"===t&&Object.values(e).forEach((e=>{["farm","house"].forEach((t=>{e[t]&&e[t].items&&e[t].items.forEach((e=>{T4Items[e.item]&&(T4Items[e.item].storages+=e.count)}))}))})),Object.keys(T4Items).forEach((e=>{T4Items[e].total=T4Items[e].inventory+T4Items[e].storages})))}startUpdatingMixers();