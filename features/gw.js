let globalMixerData={ent_goo_pot:{finishTimer:0,points:0},ent_guano_mixer:{finishTimer:0,points:0},ent_spore_chamber:{finishTimer:0,points:0}},T4Items={itm_mushroomSeeds_04:{storages:0,inventory:0,total:0},itm_soilDryer_04:{storages:0,inventory:0,total:0},itm_cave_fertilizer_04:{storages:0,inventory:0,total:0}};function handleMixers(){if(null!==cachedMixers&&"cavehub"==currentLocation){for(let t in cachedMixers)if(cachedMixers.hasOwnProperty(t)){let e=cachedMixers[t];if(globalMixerData[t].finishTimer!==e.finishTimer&&(globalMixerData[t].finishTimer=e.finishTimer,localStorage.setItem(`${t}-finishTimer`,e.finishTimer)),globalMixerData[t].points!==e.points&&updateMixerPoints(t,e.points),entityOnScreen(e)){let{screenX:i,screenY:a}=calculateScreenCoords(e),n=`mixer-${t}`,s=queueToDraw.findIndex(t=>t.id===n),o={id:n,x:i,y:a,text:`Points: ${e.points%1==0?e.points:e.points.toFixed(2)}`};s>=0?queueToDraw[s]=o:queueToDraw.push(o)}else{let r=`mixer-${t}`;queueToDraw=queueToDraw.filter(t=>t.id!==r)}}}}function startUpdatingMixers(){function t(){"cavehub"==currentLocation&&handleMixers(),requestAnimationFrame(t)}["ent_goo_pot","ent_guano_mixer","ent_spore_chamber"].forEach(t=>{globalMixerData[t].finishTimer=parseInt(localStorage.getItem(`${t}-finishTimer`))||0,globalMixerData[t].points=parseFloat(localStorage.getItem(`${t}-points`))||0}),requestAnimationFrame(t)}function updateMixerPoints(t,e){if(globalMixerData[t]){globalMixerData[t].points=e;let i=globalMixerData[t].pointsDiv;i&&(i.innerHTML=`Points: <span>${e%1==0?e:e.toFixed(2)}</span>`),localStorage.setItem(`${t}-points`,e)}}function lbReceiver(){window.addEventListener("message",t=>{"VOXELS_GW_LB_WEEKLY"===t.data.type&&sendGWLeaderboard(t.data.data)})}async function sendGWLeaderboard(t){chrome.storage.local.get("pid",async function(e){let i=e.pid;try{await makeRequestToTools({pid:i,operation:"update_lb",extra:[{data:t}]})}catch(a){}})}function handleT4Data(t,e){t&&(Object.keys(T4Items).forEach(t=>{T4Items[t][e]=0}),"inventory"===e?t.forEach(t=>{T4Items[t.item]&&(T4Items[t.item].inventory+=t.quantity)}):"storages"===e&&Object.values(t).forEach(t=>{["farm","house"].forEach(e=>{t[e]&&t[e].items&&t[e].items.forEach(t=>{T4Items[t.item]&&(T4Items[t.item].storages+=t.count)})})}),Object.keys(T4Items).forEach(t=>{T4Items[t].total=T4Items[t].inventory+T4Items[t].storages}))}startUpdatingMixers();