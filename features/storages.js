let mouseX=0,mouseY=0,isMobile=!1;function isMobileDevice(){return/Mobi|Android/i.test(navigator.userAgent)}isMobile=isMobileDevice(),document.addEventListener("mousemove",e=>{mouseX=e.clientX,mouseY=e.clientY});let currentStorageMid=0,displayStorageHover=!0,uniqueItemNamesList=[];function handleEntityData(e){let t=function e(t){let i=new Set;return t.storages.forEach(e=>{e.items.forEach(e=>{i.add(e.itemName)})}),t.inventory&&t.inventory.items&&t.inventory.items.forEach(e=>{i.add(e.item)}),t.petInventory&&t.petInventory.items&&t.petInventory.items.forEach(e=>{i.add(e.itemName)}),Array.from(i)}(e);JSON.stringify(uniqueItemNamesList)!==JSON.stringify(t)&&(uniqueItemNamesList=t).length>0&&fetchItemListPrices(uniqueItemNamesList),!isMobile&&displayStorageHover&&function e(t,i){let n=document.querySelector(".voxels-extra-nodes"),r=document.querySelector(nodeNames.storageBox);if(!n){console.error("Extra nodes container not found.");return}if(r){let s=document.getElementById("voxels-storages-hover");s&&(s.remove(),currentStorageMid=0);return}if(i){let o,l=!1;if("pet"===i.id?(o=t.petInventory,l=!0):o=t.storages.find(e=>e.mid===i.id),o){if(currentStorageMid!==(l?"pet":o.mid)||l&&"pet"!==currentStorageMid){currentStorageMid=l?"pet":o.mid;let a=document.getElementById("voxels-storages-hover");a||((a=document.createElement("div")).id="voxels-storages-hover",n.appendChild(a)),a.innerHTML="";let d=l?"Pet Inventory":`Chest Tier ${Math.ceil(o.size/6)}`,m=0,c=document.createElement("div");c.classList.add("voxels-storages-hover-header");let v=document.createElement("div");v.textContent=d;let g=document.createElement("div");g.classList.add("voxels-storages-hover-header-value"),g.textContent=m;let p=document.createElement("img");p.src=chrome.runtime.getURL("images/Prices/coin.png"),g.prepend(p),c.appendChild(v),c.appendChild(g),a.appendChild(c);let u=document.createElement("div");u.classList.add("voxels-storages-hover-content");let h=l?Math.min(o.size,6):6;for(let f=0;f<Math.ceil(o.size/h);f++)for(let y=0;y<h;y++){let x=document.createElement("div");x.classList.add("voxels-storages-hover-cell");let E=f*h+y,L=o.items.find(e=>e.position===E);if(L){let C=displayNamesJSONArray.find(e=>e.item===L.itemName);if(C){let M=document.createElement("img");M.src=C.image,M.alt=L.itemName,x.appendChild(M);let I=document.createElement("div");I.classList.add("voxels-storages-hover-quantity"),I.textContent=`x${L.quantity}`,x.appendChild(I);let $=currentPricesList[L.itemName];if($){let q=$*L.quantity;if(m+=q,displayInventoryPrice){let S=document.createElement("div");S.classList.add("voxels-inventory-price"),S.textContent=nFormatter(q,1),S.innerHTML+='<img src="'+chrome.runtime.getURL("images/Prices/coin.png")+'">',x.appendChild(S)}}}else{let N=document.createElement("img");N.src="https://pixels-api.com/images/item_not_found.png",N.alt="Item not identified",x.appendChild(N);let X=document.createElement("div");X.classList.add("voxels-storages-hover-quantity"),X.textContent=`x${L.quantity}`,x.appendChild(X)}}u.appendChild(x)}function Y(e){let t=window.innerWidth,i=window.innerHeight,n=a.offsetWidth,r=a.offsetHeight,s=e.clientX,o=e.clientY;e.clientX+n>t&&(s=e.clientX-n),e.clientY+r>i&&(o=e.clientY-r),a.style.left=`${s}px`,a.style.top=`${o}px`}a.appendChild(u),g.innerHTML='<img src="'+chrome.runtime.getURL("images/Prices/coin.png")+'">'+nFormatter(m,3),Y({clientX:mouseX,clientY:mouseY}),document.addEventListener("mousemove",Y)}}else{let H=document.getElementById("voxels-storages-hover");H&&(H.remove(),currentStorageMid=0)}}else{let b=document.getElementById("voxels-storages-hover");b&&(b.remove(),currentStorageMid=0)}}(e,e.hoverNode)}