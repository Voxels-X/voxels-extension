function loadPassPage(){chrome.storage.local.get("pid",(async function(e){const s={pid:e.pid,operation:"fetchPassData"};loadingScreenFull(1);try{const e=await makeFetchRequestByPID(apiURL,s);handleErrors(e)||("logout"==e?initiate():(loadingScreenFull(0),loadVoxelsPasses(e.data)))}catch(e){loadingScreenFull(0),quickMessage("Please try again.","error")}}))}function loadVoxelsPasses(e){let s=e.voxels_addresses;var a=document.getElementById("voxels-full-page-main");a.innerHTML="";var t=document.createElement("div");t.setAttribute("id","voxels-pass-main");var n=document.createElement("h2");n.textContent="Redeem Pass",t.appendChild(n);const i=limiter((function(){inputWithCallback("Enter your Voxels Pass code:",(function(e){/^[a-zA-Z0-9]{15}$/.test(e)?redeemPass(e):showAlert("Invalid pass code. Please ensure it is exactly 15 alphanumeric characters.","error")}))}),5e3);var l=document.createElement("button");l.textContent="Click here to redeem a Voxels Pass",l.classList.add("voxels-pass-redeem-button","clickable"),t.appendChild(l),l.addEventListener("click",i),horizontalLine=document.createElement("hr"),horizontalLine.classList.add("voxels-pass-spacer"),t.appendChild(horizontalLine);var o=document.createElement("h2");o.textContent="Buy Voxels Passes",t.appendChild(o);var c=document.createElement("p");c.innerHTML=`Select amount of passes and send the required amount from your wallet connected to <span>${e.username}</span> to the specified address.`,t.appendChild(c);var r=document.createElement("div");r.classList.add("voxels-pricing-container"),t.appendChild(r),Object.entries(e.pixels_prices).forEach((([s,a],t)=>{var n=document.createElement("div");n.classList.add("voxels-subscription-option","clickable"),0===t&&n.classList.add("voxels-premium-price-active");let i=function(e,s,a){if("1"===e)return null;const t=a[1]*e,n=((t-s)/t*100).toFixed(0);return n>0?n:null}(s,a,e.pixels_prices);n.innerHTML=`\n            <div class="voxels-price-duration">${s} pass${s>1?"es":""}</div>\n            <div class="voxels-price-amount">\n              <img class="pixels-icon" src="`+chrome.runtime.getURL("images/Other/Pixel.png")+`">\n              ${a}\n            </div>\n            ${i?`<div class="voxels-price-saving">Save ${i}%</div>`:""}\n        `,n.addEventListener("click",(function(){document.querySelectorAll(".voxels-subscription-option").forEach((e=>{e.classList.remove("voxels-premium-price-active")})),n.classList.add("voxels-premium-price-active")})),r.appendChild(n)}));var d=document.createElement("p");d.classList.add("voxels-pass-copy","clickable"),d.setAttribute("id","voxels-copy"),d.setAttribute("translate","no"),d.innerHTML=e.voxels_addresses.rns+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",t.appendChild(d),d.addEventListener("click",(function(){var s=document.createElement("textarea");s.value=e.voxels_addresses.rns,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}));var u=document.createElement("p");u.classList.add("voxels-premium-copy","clickable"),u.setAttribute("translate","no");const p=s.base.replace(/^(.{6})(.*)(.{6})$/,"$1...$3");u.innerHTML=p+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",t.appendChild(u),u.addEventListener("click",(function(){var s=document.createElement("textarea");s.value=e.voxels_addresses.base,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}));var m=document.createElement("p");m.innerHTML="<span>After sending $PIXEL click:</span>",t.appendChild(m);var v=document.createElement("p");v.classList.add("voxels-pass-reload","clickable"),v.innerHTML="Claim Passes<img src='"+chrome.runtime.getURL("images/icons/icon__refresh.svg")+"' alt='Refresh Icon'>",t.appendChild(v);var h=0;v.addEventListener("click",(function(){var e=Date.now();e-h<1e4?showAlert("Please wait 10s before retrying.","error"):(h=e,v.disabled=!0,setTimeout((function(){v.disabled=!1}),1e4),checkPasses())})),horizontalLine=document.createElement("hr"),horizontalLine.classList.add("voxels-pass-spacer"),t.appendChild(horizontalLine);var g=document.createElement("h2");g.textContent="My Passes (click here)",g.classList.add("clickable"),t.appendChild(g),g.addEventListener("click",(function(){loadPlayerPasses()})),a.appendChild(t)}function redeemPass(e){chrome.storage.local.get("pid",(async function(s){const a={pid:s.pid,operation:"redeemPass",extra:e};loadingScreenFull(1);try{const e=await makeFetchRequestByPID(apiURL,a);handleErrors(e)||("logout"==e?initiate():(loadingScreenFull(0),quickMessage("Your pass has been successfully redeemed! Reload Pixels.","success")))}catch(e){loadingScreenFull(0),quickMessage("Please try again.","error")}}))}function checkPasses(){chrome.storage.local.get("pid",(async function(e){const s={pid:e.pid,operation:"checkPasses"};loadingScreenFull(1);try{const e=await makeFetchRequestByPID(apiURL,s);handleErrors(e)||("logout"==e?initiate():(loadingScreenFull(0),e.data.transacount_found?quickMessage('Successfully claimed! Check your passes in "My Passes" below.',"success"):quickMessage("No new transaction found. Please retry in 10s","error")))}catch(e){loadingScreenFull(0),quickMessage("Please try again.","error")}}))}function loadPlayerPasses(){chrome.storage.local.get("pid",(async function(e){const s={pid:e.pid,operation:"getPasses"};loadingScreenFull(1);try{const e=await makeFetchRequestByPID(apiURL,s);if(loadingScreenFull(0),!handleErrors(e))if("logout"==e)initiate();else{showFullOverlay();let s=document.getElementById("voxels-full-overlay-main");s.innerHTML="";let a=document.createElement("div");a.setAttribute("id","voxels-my-passes-area"),a.classList.add("voxels-scroll","voxels-passes-display"),e.data&&e.data.length>0?e.data.forEach((e=>{let s=document.createElement("div");s.classList.add("voxels-pass"),s.innerHTML=`\n                                <div class="pass-details"><strong>Pass Code:</strong> ${e.pass_code}</div>\n                                <div class="pass-details"><strong>Created:</strong> ${e.created_date}</div>\n                                <div class="pass-details"><strong>Redeemed By:</strong> ${e.redeemed_by||"Not redeemed yet"}</div>\n                                <div class="pass-details"><strong>Redeemed On:</strong> ${e.redeemed_date||"N/A"}</div>\n                                <div class="pass-details"><strong>Guild:</strong> ${e.guild_name||"No guild"}`,a.appendChild(s)})):a.textContent="No passes found",s.appendChild(a)}}catch(e){loadingScreenFull(0),quickMessage("Please try again.","error")}}))}