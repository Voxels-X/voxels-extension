function loadPremium(){const e=document.querySelector(".voxels-main");chrome.storage.local.get("user_info",(async function(t){const n=t.user_info,a={name:n,operation:"getPremium"};loadingScreen(1);try{const t=await makeFetchRequest(apiURL,a);handleErrors(t)||("logout"==t?initiate():(loadingScreen(0),reloadOverlay(),loadTitleSection("premium"),loadPremiumDiv(e,t.data,n),loadFeatureDiv(e)))}catch(e){}}))}function loadPremiumDiv(e,t,n){var a=document.createElement("div");a.classList.add("voxels-main-premium","voxels-border","voxels-premium-main");var r=document.createElement("div");r.classList.add("voxels-premium-content");const i=t.premium,o=t.wallet_address||!1;if(i){const e=(new Date).getTime();if(1e3*t.premium_end>e){const e=loadPremiumEnd(t.premium_end);r.appendChild(e)}}const s=loadUserData(n,o);r.appendChild(s);const c=t.pixels_price,d=loadPrices(t.pixels_prices);r.appendChild(d);var l=document.createElement("hr");l.classList.add("voxels-premium-spacer"),r.appendChild(l);const m=t.voxels_addresses;r.appendChild(loadPremiumHowTo(c,n,m)),(l=document.createElement("hr")).classList.add("voxels-premium-spacer"),r.appendChild(l);let p="";t.creator_code&&(p=t.creator_code),r.appendChild(loadCreatorCodeSection(p,n)),(l=document.createElement("hr")).classList.add("voxels-premium-spacer"),r.appendChild(l),r.appendChild(loadFAQ()),r.appendChild(loadHelp()),a.appendChild(r),"premium"==currentActiveTab&&e.appendChild(a)}function loadPremiumEnd(e){var t=document.createElement("div");t.classList.add("voxels-premium-end");var n=new Date(1e3*e).toLocaleString();return t.innerHTML="<p>Premium active:<br><span>Ends on "+n+"</span></p>",t}function loadUserData(e,t){var n=document.createElement("div");if(n.classList.add("voxels-premium-data"),n.innerHTML+="<p>Username: <span>"+e+"</span></p>",!1===t)n.innerHTML+="<p>Your wallet: <span>Not found</span></p>";else{var a=t.replace(/^(.{5})(.*)(.{5})$/,"$1...$3");n.innerHTML+="<p>Your wallet: <span>"+a+"</span></p>"}return n}function loadPrices(e){const t=[{months:1,price:e[1]},{months:3,price:e[3]},{months:6,price:e[6]}],n=document.createElement("div");n.classList.add("voxels-pricing-container");const a=e[1];return t.forEach((e=>{const t=document.createElement("div");t.classList.add("voxels-subscription-option","clickable"),1===e.months&&t.classList.add("voxels-premium-price-active");const r=(e.price/e.months).toFixed(2),i=1===e.months?0:Math.round(100*(1-r/a));t.innerHTML=`\n        <div class="voxels-price-duration">${e.months} month${e.months>1?"s":""}</div>\n        <div class="voxels-price-amount">\n          <img class='pixels-icon' src='${chrome.runtime.getURL("images/Other/Pixel.png")}' />\n          ${e.price}\n        </div>\n        ${e.months>1?`<div class="voxels-price-saving">Save ${i}%</div>`:""}\n      `,t.addEventListener("click",(function(){document.querySelectorAll(".voxels-subscription-option").forEach((e=>{e.classList.remove("voxels-premium-price-active")})),t.classList.add("voxels-premium-price-active");document.querySelector(".voxels-premium-info .voxels-price-value").textContent=e.price;document.querySelector(".voxels-premium-info").scrollIntoView({behavior:"smooth",block:"start"})})),n.appendChild(t)})),n}function loadPremiumHowTo(e,t,n){var a=document.createElement("div");a.classList.add("voxels-premium-info"),a.innerHTML="<p>How to get Premium:</p><p><span>Send <img class='pixels-icon' src='"+chrome.runtime.getURL("images/Other/Pixel.png")+"'><span class='voxels-price-value'>"+e+"</span> from your wallet connected to <span style='color: var(--main-new-bg);'>"+t+"</span> to:</span></p>";var r=document.createElement("p");r.classList.add("voxels-premium-copy","clickable"),r.setAttribute("id","voxels-copy"),r.setAttribute("translate","no"),r.innerHTML=n.rns+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",a.appendChild(r),r.addEventListener("click",(function(){var e=document.createElement("textarea");e.value=n.rns,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);var t=document.createElement("div");t.classList.add("voxels-hover-box"),t.textContent="Copied!",document.body.appendChild(t);var a=r.getBoundingClientRect();t.style.position="absolute",t.style.top=a.top-t.offsetHeight+"px",t.style.left=a.left+"px",setTimeout((function(){document.body.removeChild(t)}),2e3)}));var i=document.createElement("p");i.classList.add("voxels-premium-copy","clickable"),i.setAttribute("translate","no");const o=n.base.replace(/^(.{6})(.*)(.{6})$/,"$1...$3");i.innerHTML=o+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",a.appendChild(i),i.addEventListener("click",(function(){var e=document.createElement("textarea");e.value=n.base,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);var t=document.createElement("div");t.classList.add("voxels-hover-box"),t.textContent="Copied!",document.body.appendChild(t);var a=i.getBoundingClientRect();t.style.position="absolute",t.style.top=a.top-t.offsetHeight+"px",t.style.left=a.left+"px",setTimeout((function(){document.body.removeChild(t)}),2e3)}));var s=document.createElement("p");s.innerHTML="<span>After sending $PIXEL click:</span>",a.appendChild(s);var c=document.createElement("p");c.classList.add("voxels-premium-reload","clickable"),c.innerHTML="Claim Premium<img src='"+chrome.runtime.getURL("images/icons/icon__refresh.svg")+"' alt='Refresh Icon'>",a.appendChild(c);var d=0;return c.addEventListener("click",(function(){var e=Date.now();e-d<1e4?showAlert("Please wait 10s before retrying.","error"):(d=e,c.disabled=!0,setTimeout((function(){c.disabled=!1}),1e4),checkPremium())})),a}function loadPremiumPass(e,t){var n=document.createElement("div");n.classList.add("voxels-premium-pass");var a=document.createElement("p");a.innerHTML="Premium Pass <img src='"+chrome.runtime.getURL("images/Other/pass.png")+"' alt='Pass Icon'>",n.appendChild(a);var r=document.createElement("p");return r.innerHTML='<span>Purchase and redeem:</span> <a href="#" id="redeemLink">Here</a>',n.appendChild(r),r.addEventListener("click",(function(e){e.preventDefault(),switchFullPage("pass")})),n}function loadCreatorCodeSection(e,t){var n=document.createElement("div");n.classList.add("voxels-premium-code");var a=document.createElement("p");if(a.innerHTML="Creator code",n.appendChild(a),""==e){var r=document.createElement("div");r.classList.add("voxels-input-container");var i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("placeholder","Enter creator code"),r.appendChild(i),i.addEventListener("keydown",(function(e){document.activeElement===i&&e.stopPropagation()}));var o=document.createElement("button");o.textContent="Submit",o.addEventListener("click",(function(){setCreatorCode(i.value,t)})),r.appendChild(o),n.appendChild(r)}else{var s=document.createElement("p");s.innerHTML="<span>Creator: "+e.code+"</span>",n.appendChild(s)}return n}async function setCreatorCode(e,t){const n={name:t,operation:"setCreatorCode",extra:e};try{const t=await makeFetchRequest(apiURL,n);handleErrors(t)||("logout"==t?initiate():setNewCode(e))}catch(e){}}function setNewCode(e){var t=document.querySelector(".voxels-premium-code"),n=t.querySelector(".voxels-input-container");n&&n.remove();var a=document.createElement("p");a.innerHTML="<span>Creator: "+e+"</span>",t.appendChild(a)}function checkPremium(){chrome.storage.local.get("pid",(async function(e){const t={pid:e.pid,operation:"checkPremiumPID"};loadingScreen(1);try{const e=await makeFetchRequestByPID(apiURL,t);handleErrors(e)||(loadingScreen(0),"logout"==e?initiate():"paid"==e.data&&(showAlert("Successfully claimed Premium! Reload play.pixels.xyz","success"),reloadVoxels()))}catch(e){}}))}function loadFAQ(){var e=document.createElement("div");e.classList.add("voxels-premium-faq"),(r=document.createElement("p")).innerHTML="FAQ",e.appendChild(r);var t=[["How to renew Premium?",'Every time you send $PIXEL and click "Claim Premium" your Premium will be prolonged by another 30 days.'],["I sent $PIXEL but didn't receive premium?",'Check that your transaction has settled and click "Claim Premium". If you haven\'t received premium after 5 minutes contact us on <a href="https://discord.gg/jKnhzscVn3" target="_blank">Discord</a>'],["Why has the $PIXEL amount changed?","As the market situation can be rather volatile we aim to keep the premium price for Voxels stable."]],n=document.createElement("ol");for(let e=0;e<t.length;e++){var a=document.createElement("li"),r=t[e][0],i=t[e][1];a.appendChild(document.createTextNode(r));var o=document.createElement("span");o.innerHTML="<br>"+i,a.appendChild(o),n.appendChild(a)}return e.appendChild(n),e}function loadHelp(){var e=document.createElement("div");e.classList.add("voxels-premium-help");var t=document.createElement("a");t.href="https://discord.gg/jKnhzscVn3",t.target="_blank",t.innerHTML='<img src="'+chrome.runtime.getURL("images/icons/icon__discord.svg")+'" alt="Discord Icon">',e.appendChild(t);var n=document.createElement("a");return n.href="https://twitter.com/VoxelsExtension",n.target="_blank",n.innerHTML='<img src="'+chrome.runtime.getURL("images/icons/icon__X.svg")+'" alt="X Icon">',e.appendChild(n),e}function loadFeatureDiv(e){var t=document.createElement("div");t.classList.add("voxels-main-premium","voxels-border","voxels-premium-feature");var n=document.createElement("div");n.classList.add("voxels-premium-title"),n.innerText="Premium features",t.appendChild(n);var a=document.createElement("div");a.classList.add("voxels-premium-content");var r=[["Player networth","Track all of your items and industries across all lands. See your player networth in real time, combining your storages, industries, coins, market listings and pet inventories.","networth.png"],["Industry Search","Filter your industry search by active boosts, tree density & soil state.","Premium_SearchBoost.png"],["Leaderboards","Access new $Pixel & Coin leaderboards, Player XP leaderboard, and leaderboards for Buoy Bucks, Stuff Stubs, and Zonez Tokens.","playerpage.png"],["Player Page","Fully redesigned player page with Buoy Bucks, Quicksilver, market listings, historical $Pixel & Coin graphs for 12 months, and historical username search."],["Discord Premium","Get a special premium role on the Voxels discord and take part in premium events!"],["Stats Page","New highlights including historical $PIXEL earnings, Daily Earnings with CPP & EPM & Player leaderboards.","Premium_StatsLB.png"],["Minimum TB Levels","Access to minimum levels required for any $PIXEL tasks available!","Premium_StatsLevels.png"],["Merchant Ships","New leaderboard for merchant ships with Pixels earned, CPP, and Contracts delivered.","Premium_MS.png"]],i=document.createElement("ol");for(let e=0;e<r.length;e++){var o=document.createElement("li"),s=r[e][0],c=r[e][1],d=r[e][2];if(o.appendChild(document.createTextNode(s)),d){var l=document.createElement("img");l.src=chrome.runtime.getURL("images")+"/Premium/"+d,l.classList.add("voxels-premium-feature-image"),o.appendChild(l),(m=document.createElement("span")).innerHTML=c,o.appendChild(m)}else{var m;(m=document.createElement("span")).innerHTML="<br>"+c,o.appendChild(m)}i.appendChild(o)}a.appendChild(i),t.appendChild(a),"premium"==currentActiveTab&&e.appendChild(t)}