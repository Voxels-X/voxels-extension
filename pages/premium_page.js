function loadPremium(){let e=document.querySelector(".voxels-main");chrome.storage.local.get("user_info",async function(t){let a=t.user_info;loadingScreen(1);try{let r=await makeFetchRequest(apiURL,{name:a,operation:"getPremium"});handleErrors(r)||("logout"==r?initiate():(loadingScreen(0),reloadOverlay(),loadTitleSection("premium"),loadPremiumDiv(e,r.data,a),loadFeatureDiv(e)))}catch(i){console.error(i)}})}function loadPremiumDiv(e,t,a){var r=document.createElement("div");r.classList.add("voxels-main-premium","pixel-border","voxels-premium-main");var i=document.createElement("div");i.classList.add("voxels-premium-title"),i.innerText="VOXELS PREMIUM",r.appendChild(i);var n=document.createElement("div");n.classList.add("voxels-premium-content");let s=t.premium,l=t.wallet_address||!1;if(s){let o=new Date().getTime();if(1e3*t.premium_end>o){let d=loadPremiumEnd(t.premium_end);n.appendChild(d)}}let c=loadUserData(a,l);n.appendChild(c);let p=t.pixels_price,m=t.pixels_prices,u=loadPrices(m);n.appendChild(u);var v=document.createElement("hr");v.classList.add("voxels-premium-spacer"),n.appendChild(v);let h=t.voxels_addresses;n.appendChild(loadPremiumHowTo(p,a,h)),(v=document.createElement("hr")).classList.add("voxels-premium-spacer"),n.appendChild(v);let x=t.voxels_pass_addresses;n.appendChild(loadPremiumPass(a,x)),(v=document.createElement("hr")).classList.add("voxels-premium-spacer"),n.appendChild(v);let C="";t.creator_code&&(C=t.creator_code),n.appendChild(loadCreatorCodeSection(C,a)),(v=document.createElement("hr")).classList.add("voxels-premium-spacer"),n.appendChild(v),n.appendChild(loadFAQ()),n.appendChild(loadHelp()),r.appendChild(n),"premium"==currentActiveTab&&e.appendChild(r)}function loadPremiumEnd(e){var t=document.createElement("div");t.classList.add("voxels-premium-end");var a=new Date(1e3*e).toLocaleString();return t.innerHTML="<p>Premium active:<br><span>Ends on "+a+"</span></p>",t}function loadUserData(e,t){var a=document.createElement("div");if(a.classList.add("voxels-premium-data"),a.innerHTML+="<p>Username: <span>"+e+"</span></p>",!1===t)a.innerHTML+="<p>Your wallet: <span>Not found</span></p>";else{var r=t.replace(/^(.{5})(.*)(.{5})$/,"$1...$3");a.innerHTML+="<p>Your wallet: <span>"+r+"</span></p>"}return a}function loadPrices(e){let t=[{months:1,price:e["1"]},{months:3,price:e["3"]},{months:6,price:e["6"]}],a=document.createElement("div");a.classList.add("voxels-pricing-container");let r=e["1"];return t.forEach(e=>{let t=document.createElement("div");t.classList.add("voxels-subscription-option","clickable"),1===e.months&&t.classList.add("voxels-premium-price-active");let i=(e.price/e.months).toFixed(2),n=1===e.months?0:Math.round((1-i/r)*100);t.innerHTML=`
        <div class="voxels-price-duration">${e.months} month${e.months>1?"s":""}</div>
        <div class="voxels-price-amount">
          <img class='pixels-icon' src='${chrome.runtime.getURL("images/Other/Pixel.png")}' />
          ${e.price}
        </div>
        ${e.months>1?`<div class="voxels-price-saving">Save ${n}%</div>`:""}
      `,t.addEventListener("click",function(){document.querySelectorAll(".voxels-subscription-option").forEach(e=>{e.classList.remove("voxels-premium-price-active")}),t.classList.add("voxels-premium-price-active");let a=document.querySelector(".voxels-premium-info .voxels-price-value");a.textContent=e.price;let r=document.querySelector(".voxels-premium-info");r.scrollIntoView({behavior:"smooth",block:"start"})}),a.appendChild(t)}),a}function loadPremiumHowTo(e,t,a){var r=document.createElement("div");r.classList.add("voxels-premium-info"),r.innerHTML="<p>How to get Premium:</p><p><span>Send <img class='pixels-icon' src='"+chrome.runtime.getURL("images/Other/Pixel.png")+"'><span class='voxels-price-value'>"+e+"</span> from your wallet connected to <span style='color: var(--main-new-bg);'>"+t+"</span> to:</span></p>";var i=document.createElement("p");i.classList.add("voxels-premium-copy","clickable"),i.setAttribute("id","voxels-copy"),i.setAttribute("translate","no"),i.innerHTML=a.rns+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",r.appendChild(i),i.addEventListener("click",function(){var e=document.createElement("textarea");e.value=a.rns,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);var t=document.createElement("div");t.classList.add("voxels-hover-box"),t.textContent="Copied!",document.body.appendChild(t);var r=i.getBoundingClientRect();t.style.position="absolute",t.style.top=r.top-t.offsetHeight+"px",t.style.left=r.left+"px",setTimeout(function(){document.body.removeChild(t)},2e3)});var n=document.createElement("p");n.classList.add("voxels-premium-copy","clickable"),n.setAttribute("translate","no");let s=a.base.replace(/^(.{6})(.*)(.{6})$/,"$1...$3");n.innerHTML=s+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",r.appendChild(n),n.addEventListener("click",function(){var e=document.createElement("textarea");e.value=a.base,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);var t=document.createElement("div");t.classList.add("voxels-hover-box"),t.textContent="Copied!",document.body.appendChild(t);var r=n.getBoundingClientRect();t.style.position="absolute",t.style.top=r.top-t.offsetHeight+"px",t.style.left=r.left+"px",setTimeout(function(){document.body.removeChild(t)},2e3)});var l=document.createElement("p");l.innerHTML="<span>After sending $PIXEL click:</span>",r.appendChild(l);var o=document.createElement("p");o.classList.add("voxels-premium-reload","clickable"),o.innerHTML="Claim Premium<img src='"+chrome.runtime.getURL("images/icons/icon__refresh.svg")+"' alt='Refresh Icon'>",r.appendChild(o);var d=0;return o.addEventListener("click",function(){var e=Date.now();if(e-d<1e4){showAlert("Please wait 10s before retrying.","error");return}d=e,o.disabled=!0,setTimeout(function(){o.disabled=!1},1e4),checkPremium(t)}),r}function loadPremiumPass(e,t){var a=document.createElement("div");a.classList.add("voxels-premium-pass");var r=document.createElement("p");r.innerHTML="Premium Pass <img src='"+chrome.runtime.getURL("images/Other/pass.png")+"' alt='Pass Icon'>",a.appendChild(r);var i=document.createElement("p");return i.innerHTML='<span>Purchase and redeem:</span> <a href="#" id="redeemLink">Here</a>',a.appendChild(i),i.addEventListener("click",function(e){e.preventDefault(),switchFullPage("pass")}),a}function loadCreatorCodeSection(e,t){var a=document.createElement("div");a.classList.add("voxels-premium-code");var r=document.createElement("p");if(r.innerHTML="Creator code",a.appendChild(r),""==e){var i=document.createElement("div");i.classList.add("voxels-input-container");var n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("placeholder","Enter creator code"),i.appendChild(n),n.addEventListener("keydown",function(e){document.activeElement===n&&e.stopPropagation()});var s=document.createElement("button");s.textContent="Submit",s.addEventListener("click",function(){setCreatorCode(n.value,t)}),i.appendChild(s),a.appendChild(i)}else{var l=document.createElement("p");l.innerHTML="<span>Creator: "+e.code+"</span>",a.appendChild(l)}return a}async function setCreatorCode(e,t){try{let a=await makeFetchRequest(apiURL,{name:t,operation:"setCreatorCode",extra:e});handleErrors(a)||("logout"==a?initiate():setNewCode(e))}catch(r){console.error(r)}}function setNewCode(e){var t=document.querySelector(".voxels-premium-code"),a=t.querySelector(".voxels-input-container");a&&a.remove();var r=document.createElement("p");r.innerHTML="<span>Creator: "+e+"</span>",t.appendChild(r)}async function checkPremium(e){try{let t=await makeFetchRequest(apiURL,{name:e,operation:"checkPremium"});handleErrors(t)||("logout"==t?initiate():"paid"==t.data&&(showAlert("Successfully claimed Premium! Reload play.pixels.xyz","success"),reloadVoxels()))}catch(a){console.error(a)}}function loadFAQ(){var e=document.createElement("div");e.classList.add("voxels-premium-faq");var t=document.createElement("p");t.innerHTML="FAQ",e.appendChild(t);var a=[["How to renew Premium?",'Every time you send $PIXEL and click "Claim Premium" your Premium will be prolonged by another 30 days.'],["I sent $PIXEL but didn't receive premium?",'Check that your transaction has settled and click "Claim Premium". If you haven\'t received premium after 5 minutes contact us on <a href="https://discord.gg/jKnhzscVn3" target="_blank">Discord</a>'],["Why has the $PIXEL amount changed?","As the market situation can be rather volatile we aim to keep the premium price for Voxels stable."]],r=document.createElement("ol");for(let i=0;i<a.length;i++){var n=document.createElement("li"),t=a[i][0],s=a[i][1];n.appendChild(document.createTextNode(t));var l=document.createElement("span");l.innerHTML="<br>"+s,n.appendChild(l),r.appendChild(n)}return e.appendChild(r),e}function loadHelp(){var e=document.createElement("div");e.classList.add("voxels-premium-help");var t=document.createElement("a");t.href="https://discord.gg/jKnhzscVn3",t.target="_blank",t.innerHTML='<img src="'+chrome.runtime.getURL("images/icons/icon__discord.svg")+'" alt="Discord Icon">',e.appendChild(t);var a=document.createElement("a");return a.href="https://twitter.com/VoxelsExtension",a.target="_blank",a.innerHTML='<img src="'+chrome.runtime.getURL("images/icons/icon__X.svg")+'" alt="X Icon">',e.appendChild(a),e}function loadFeatureDiv(e){var t=document.createElement("div");t.classList.add("voxels-main-premium","pixel-border","voxels-premium-feature");var a=document.createElement("div");a.classList.add("voxels-premium-title"),a.innerText="Premium features",t.appendChild(a);var r=document.createElement("div");r.classList.add("voxels-premium-content");var i=[["Player networth","Track all of your items and industries across all lands. See your player networth in real time, combining your storages, industries, coins, market listings and pet inventories.","networth.png"],["50 Plots","Add up to 50 plots/locations to track farm timers (more timers coming soon: trees etc.).","timers.png"],["Auto-Detect collecting","Voxels automatically starts the timer for your farm (4 main farms: apiary, mine, coop, hutch). Make sure to add the location first."],["Total tasks cost","View the total cost of your task, if you would buy the items on the market place.","task_cost.png"],["Display tasks","Track your current tasks for Hazel from anywhere!","tasks_display.png"],["Discord Premium","Get a special premium role on the Voxels discord and take part in premium events!"],["Personal stats","Your personal Pixel statistics display","stats_personal.png"],["Graphs","Detailed graphs of the statistics","stats_graphs.png"],["Seasonal Voxels leaderboard","Compete with other Voxel Premium users for prizes","stats_leaderboard.png"],],n=document.createElement("ol");for(let s=0;s<i.length;s++){var l=document.createElement("li"),o=i[s][0],d=i[s][1],c=i[s][2];if(l.appendChild(document.createTextNode(o)),c){var p=document.createElement("img");p.src=chrome.runtime.getURL("images")+"/Premium/"+c,p.classList.add("voxels-premium-feature-image"),l.appendChild(p);var m=document.createElement("span");m.innerHTML=d,l.appendChild(m)}else{var m=document.createElement("span");m.innerHTML="<br>"+d,l.appendChild(m)}n.appendChild(l)}r.appendChild(n),t.appendChild(r),"premium"==currentActiveTab&&e.appendChild(t)}